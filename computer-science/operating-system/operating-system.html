<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>operating system - something</title>


    <!-- Custom HTML head -->
    
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="../../favicon.svg">
    <link rel="shortcut icon" href="../../favicon.png">
    <link rel="stylesheet" href="../../css/variables.css">
    <link rel="stylesheet" href="../../css/general.css">
    <link rel="stylesheet" href="../../css/chrome.css">
    <link rel="stylesheet" href="../../css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="../../fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="../../highlight.css">
    <link rel="stylesheet" href="../../tomorrow-night.css">
    <link rel="stylesheet" href="../../ayu-highlight.css">
    <link rel="stylesheet" href="../../monokai.css">

    <!-- Custom theme stylesheets -->
    <link rel="stylesheet" href="../../theme/pagetoc.css">

    <!-- google anagles-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E4ZX8LPY4F"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-E4ZX8LPY4F');
        //ga('send', 'pageview');
    </script>
</head>

<body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../index.html"><strong aria-hidden="true">1.</strong> about me</a></li><li class="chapter-item "><a href="../../math/index.html"><strong aria-hidden="true">2.</strong> math</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../math/probability/hw2.html"><strong aria-hidden="true">2.1.</strong> probability</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../math/probability/hw2.html"><strong aria-hidden="true">2.1.1.</strong> hw2</a></li><li class="chapter-item "><a href="../../math/probability/hw3.html"><strong aria-hidden="true">2.1.2.</strong> hw3</a></li><li class="chapter-item "><a href="../../math/probability/hw4.html"><strong aria-hidden="true">2.1.3.</strong> hw4</a></li><li class="chapter-item "><a href="../../math/probability/hw5.html"><strong aria-hidden="true">2.1.4.</strong> hw5</a></li><li class="chapter-item "><a href="../../math/probability/hw6.html"><strong aria-hidden="true">2.1.5.</strong> hw6</a></li><li class="chapter-item "><a href="../../math/probability/hw7.html"><strong aria-hidden="true">2.1.6.</strong> hw7</a></li><li class="chapter-item "><a href="../../math/probability/hw8.html"><strong aria-hidden="true">2.1.7.</strong> hw8</a></li><li class="chapter-item "><a href="../../math/probability/hw9.html"><strong aria-hidden="true">2.1.8.</strong> hw9</a></li></ol></li><li class="chapter-item "><a href="../../math/signals-and-systems/signals-and-systems.html"><strong aria-hidden="true">2.2.</strong> signals and systems</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../math/signals-and-systems/signals-and-systems.html"><strong aria-hidden="true">2.2.1.</strong> signals processing</a></li><li class="chapter-item "><a href="../../math/signals-and-systems/mid.html"><strong aria-hidden="true">2.2.2.</strong> mid</a></li><li class="chapter-item "><a href="../../math/signals-and-systems/final.html"><strong aria-hidden="true">2.2.3.</strong> final</a></li></ol></li><li class="chapter-item "><a href="../../math/linear-algebra.html"><strong aria-hidden="true">2.3.</strong> linear algebra</a></li><li class="chapter-item "><a href="../../math/matrix-algebra/matrix-algebra.html"><strong aria-hidden="true">2.4.</strong> matrix algebra</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../math/matrix-algebra/matrix-algebra.html"><strong aria-hidden="true">2.4.1.</strong> matrix algebra</a></li><li class="chapter-item "><a href="../../math/matrix-algebra/Q2.html"><strong aria-hidden="true">2.4.2.</strong> Q2</a></li><li class="chapter-item "><a href="../../math/matrix-algebra/Q3.html"><strong aria-hidden="true">2.4.3.</strong> Q3</a></li></ol></li><li class="chapter-item "><a href="../../math/formal-language/formal-language.html"><strong aria-hidden="true">2.5.</strong> formal language</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../math/formal-language/formal-language.html"><strong aria-hidden="true">2.5.1.</strong> formal language</a></li><li class="chapter-item "><a href="../../math/formal-language/hw1.html"><strong aria-hidden="true">2.5.2.</strong> hw1</a></li></ol></li><li class="chapter-item "><a href="../../math/calculus.html"><strong aria-hidden="true">2.6.</strong> calculus</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science/index.html"><strong aria-hidden="true">3.</strong> computer science</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../computer-science/data-science/data-science.html"><strong aria-hidden="true">3.1.</strong> data science</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../computer-science/data-science/data-science.html"><strong aria-hidden="true">3.1.1.</strong> data science</a></li><li class="chapter-item "><a href="../../computer-science/data-science/hw1.html"><strong aria-hidden="true">3.1.2.</strong> hw1</a></li><li class="chapter-item "><a href="../../computer-science/data-science/hw2.html"><strong aria-hidden="true">3.1.3.</strong> hw2</a></li><li class="chapter-item "><a href="../../computer-science/data-science/hw3.html"><strong aria-hidden="true">3.1.4.</strong> hw3</a></li></ol></li><li class="chapter-item "><a href="../../computer-science/database-systems/database-systems.html"><strong aria-hidden="true">3.2.</strong> database systems</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../computer-science/database-systems/database-systems.html"><strong aria-hidden="true">3.2.1.</strong> database systems</a></li><li class="chapter-item "><a href="../../computer-science/database-systems/hw1.html"><strong aria-hidden="true">3.2.2.</strong> hw1</a></li><li class="chapter-item "><a href="../../computer-science/database-systems/hw2.html"><strong aria-hidden="true">3.2.3.</strong> hw2</a></li><li class="chapter-item "><a href="../../computer-science/database-systems/hw3.html"><strong aria-hidden="true">3.2.4.</strong> hw3</a></li><li class="chapter-item "><a href="../../computer-science/database-systems/hw4.html"><strong aria-hidden="true">3.2.5.</strong> hw4</a></li></ol></li><li class="chapter-item "><a href="../../computer-science/computer-network/computer-network.html"><strong aria-hidden="true">3.3.</strong> computer networking</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../computer-science/computer-network/computer-network.html"><strong aria-hidden="true">3.3.1.</strong> computer networking</a></li><li class="chapter-item "><a href="../../computer-science/computer-network/hw1.html"><strong aria-hidden="true">3.3.2.</strong> hw1</a></li><li class="chapter-item "><a href="../../computer-science/computer-network/hw2.html"><strong aria-hidden="true">3.3.3.</strong> hw2</a></li><li class="chapter-item "><a href="../../computer-science/computer-network/hw4.html"><strong aria-hidden="true">3.3.4.</strong> hw4</a></li><li class="chapter-item "><a href="../../computer-science/computer-network/hw5.html"><strong aria-hidden="true">3.3.5.</strong> hw5</a></li><li class="chapter-item "><a href="../../computer-science/computer-network/hw6.html"><strong aria-hidden="true">3.3.6.</strong> hw6</a></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science/operating-system/operating-system.html" class="active"><strong aria-hidden="true">3.4.</strong> operating system</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science/operating-system/operating-system.html" class="active"><strong aria-hidden="true">3.4.1.</strong> operating system</a></li><li class="chapter-item "><a href="../../computer-science/operating-system/hw1.html"><strong aria-hidden="true">3.4.2.</strong> hw1</a></li><li class="chapter-item "><a href="../../computer-science/operating-system/hw2.html"><strong aria-hidden="true">3.4.3.</strong> hw2</a></li><li class="chapter-item "><a href="../../computer-science/operating-system/hw3.html"><strong aria-hidden="true">3.4.4.</strong> hw3</a></li><li class="chapter-item "><a href="../../computer-science/operating-system/hw4.html"><strong aria-hidden="true">3.4.5.</strong> hw4</a></li></ol></li><li class="chapter-item "><a href="../../computer-science/BitTorrent.html"><strong aria-hidden="true">3.5.</strong> BitTorrent</a></li><li class="chapter-item "><a href="../../computer-science/CSG.html"><strong aria-hidden="true">3.6.</strong> CSG(Constructive Solid Geometry) mesh boolean</a></li><li class="chapter-item "><a href="../../computer-science/leetcode.html"><strong aria-hidden="true">3.7.</strong> leetcode</a></li><li class="chapter-item "><a href="../../computer-science/nerf.html"><strong aria-hidden="true">3.8.</strong> nerf</a></li></ol></li><li class="chapter-item "><a href="../../tool/index.html"><strong aria-hidden="true">4.</strong> tool</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../tool/git.html"><strong aria-hidden="true">4.1.</strong> git</a></li><li class="chapter-item "><a href="../../tool/vim.html"><strong aria-hidden="true">4.2.</strong> vim</a></li><li class="chapter-item "><a href="../../tool/ffmpeg.html"><strong aria-hidden="true">4.3.</strong> ffmpeg</a></li><li class="chapter-item "><a href="../../tool/shortcut.html"><strong aria-hidden="true">4.4.</strong> shortcut</a></li><li class="chapter-item "><a href="../../tool/graphviz.html"><strong aria-hidden="true">4.5.</strong> graphviz</a></li><li class="chapter-item "><a href="../../tool/shields.io.html"><strong aria-hidden="true">4.6.</strong> shields.io</a></li><li class="chapter-item "><a href="../../tool/docker.html"><strong aria-hidden="true">4.7.</strong> docker</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                            aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                            aria-label="Change theme" aria-haspopup="true" aria-expanded="false"
                            aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="monokai">Monokai</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                            aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                            aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">something</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/x06lan/mdbook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..."
                            aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="sidetoc">
                            <nav class="pagetoc"></nav>
                        </div>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="operating-system"><a class="header" href="#operating-system">operating system</a></h1>
<p>tags: <code>software</code> <code>hardware</code> <code>system</code></p>
<h1 id="chapter-1-computer-system"><a class="header" href="#chapter-1-computer-system">Chapter 1: Computer System</a></h1>
<h2 id="structure"><a class="header" href="#structure">Structure</a></h2>
<p><img src="https://imgur.com/WIg4WHA.png" alt="" /></p>
<p>One or more CPUs, device controllers connect through
common bus providing access to shared memory</p>
<!-- ![](https://imgur.com/zrdncP6.png) -->
<p><img src="https://imgur.com/hFMTIBI.png" alt="" /></p>
<ul>
<li>Process Management
<ul>
<li>Creating and deleting both user and system processes</li>
<li>Suspending and resuming processes</li>
<li>Providing mechanisms for process synchronization</li>
<li>Providing mechanisms for process communication</li>
<li>Providing mechanisms for deadlock handlin</li>
</ul>
</li>
<li>Memory Management
<ul>
<li>Von Neumann architecture
<ul>
<li>To execute a program, all (or part) of the instructions must be in memory</li>
<li>All (or part) of the data that is needed by the program must be in memory</li>
</ul>
</li>
<li>Allocating and deallocating memory space as needed</li>
<li>Keeping track of which parts of memory are currently being used and by whom</li>
<li>Deciding which processes (or parts thereof) and data to move into and out of memory</li>
</ul>
</li>
<li>file system management
<ul>
<li>Abstracts physical properties to logical storage unit - file</li>
<li>Access control on most systems to determine who can access what</li>
</ul>
</li>
<li>Mass-Storage Management
<ul>
<li>mounting and unmounting</li>
<li>fire-space management</li>
<li>storage allocation</li>
<li>disk scheduling</li>
<li>partitioning</li>
<li>protection</li>
</ul>
</li>
<li>caching management
<ul>
<li>Faster storage (cache)</li>
<li>mportant principle, performed at many levels in a computer (in hardware, operating system, software)</li>
</ul>
</li>
<li>I/O Subsystem
<ul>
<li>buffering(storing data temporarily while it is being transferred)</li>
<li>caching(storing part of data in faster storage for performance)</li>
<li>spooling</li>
</ul>
</li>
</ul>
<h2 id="operation"><a class="header" href="#operation">operation</a></h2>
<ul>
<li>I/O is from the device to local buffer of controller</li>
<li>CPU moves data from/to main memory to/from local buffers</li>
<li><strong>Device controller informs CPU that it has finished its operation by causing an interrupt</strong></li>
</ul>
<h2 id="interrupt"><a class="header" href="#interrupt">interrupt</a></h2>
<ul>
<li>software-generated interrupt :execption</li>
<li>Modern OS is interrupt-driven</li>
<li>Interrupt architecture must save the address of the interrupted instruction</li>
</ul>
<h3 id="interrupt-handling"><a class="header" href="#interrupt-handling">Interrupt Handling</a></h3>
<ul>
<li>The OS preserves the state of the CPU by storing the registers and the program counter</li>
<li>type of interrupt
<ul>
<li>polling</li>
<li>vectored</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/ey7PR4G.png" alt="" /></p>
<h2 id="io"><a class="header" href="#io">I/O</a></h2>
<h3 id="handling-io"><a class="header" href="#handling-io">handling I/O</a></h3>
<ul>
<li>Synchronous: After I/O starts, control returns to user program only upon I/O completion
<ul>
<li>wait instruction idles the cpu until the next interrupt</li>
<li>wait loop</li>
</ul>
</li>
<li>Asynchronous: After I/O starts, control returns to user program without waiting for I/O completion
<ul>
<li>system call:request to the OS to allow user to wait for I/O completion</li>
</ul>
</li>
</ul>
<h2 id="storage-structure"><a class="header" href="#storage-structure">storage structure</a></h2>
<ul>
<li>main memory 
<ul>
<li>cpu can access directly</li>
<li>Dynamic Random-access Memory (DRAM)</li>
<li>Typically volatile</li>
</ul>
</li>
<li>HDD</li>
<li>Non-volatile memory (NVM)</li>
</ul>
<p><img src="https://imgur.com/GHJAvzl.png" alt="" /></p>
<h2 id="direct-memory-accessdma"><a class="header" href="#direct-memory-accessdma">Direct Memory Access(DMA)</a></h2>
<p><img src="https://imgur.com/wWrbQVo.png" alt="" /></p>
<ul>
<li>Used for high-speed I/O devices able to transmit information at close to memory speeds</li>
<li>Device controller transfers blocks of data from buffer storage directly to main memory without CPU intervention</li>
<li>Only one interrupt is generated per block, rather than one interrupt per byte</li>
</ul>
<h2 id="symmetric-multiprocessing-architecture"><a class="header" href="#symmetric-multiprocessing-architecture">Symmetric Multiprocessing Architecture</a></h2>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Dual-Core Design</th><th style="text-align: center">Non-Uniform Memory Access System</th></tr></thead><tbody>
<tr><td style="text-align: center"><img src="https://imgur.com/1UF7oQL.png" alt="" /></td><td style="text-align: center"><img src="https://imgur.com/uu6dde5.png" alt="" /></td></tr>
</tbody></table>
</div>
<h2 id="virtualization"><a class="header" href="#virtualization">Virtualization</a></h2>
<p>have different kernel</p>
<p><img src="https://imgur.com/WWoDBRe.png" alt="" /></p>
<h2 id="cloud-computing"><a class="header" href="#cloud-computing">cloud computing</a></h2>
<p><img src="https://imgur.com/W1HegDq.png" alt="" /></p>
<ul>
<li>Software as a Service (SaaS) 
<ul>
<li>one or more applications available via the Internet (i.e., word processor)</li>
</ul>
</li>
<li>Platform as a Service (PaaS) 
<ul>
<li>software stack ready for application use via the Internet (i.e., a database server)</li>
</ul>
</li>
<li>Infrastructure as a Service (IaaS) 
<ul>
<li>servers or storage available over Internet (i.e., storage available for backup use)</li>
</ul>
</li>
</ul>
<h2 id="kernel-data-structures"><a class="header" href="#kernel-data-structures">Kernel Data Structures</a></h2>
<p><img src="https://imgur.com/nSTFnOf.png" alt="" /></p>
<h1 id="chapter-2-operating-system-service"><a class="header" href="#chapter-2-operating-system-service">Chapter 2: Operating-System Service</a></h1>
<h2 id="system-calls"><a class="header" href="#system-calls">System Calls</a></h2>
<ul>
<li>Programming interface to the services provided by the OS</li>
<li>Typically written in a high-level language (C or C++)</li>
<li>Mostly accessed by programs via a high-level Application Programming Interface (API) rather than direct system call</li>
<li>System Call Parameter Passing
<ul>
<li>pushed, onto the stack by the program and popped off the stack by the OS
<img src="https://imgur.com/SmCvYm2.png" alt="" /></li>
</ul>
</li>
</ul>
<!-- ![](https://imgur.com/oKiVXUc.png) -->
<h3 id="types-of-system-calls"><a class="header" href="#types-of-system-calls">Types of System Calls</a></h3>
<ul>
<li>Process control
<ul>
<li>create process, terminate process</li>
<li>end, abort</li>
<li>load, execute</li>
<li>get process attributes, set process attributes</li>
<li>wait for time</li>
<li>wait event, signal event</li>
<li>allocate and free memory</li>
<li>Dump memory if error</li>
<li>Debugger for determining bugs, single step execution</li>
<li>Locks for managing access to shared data between</li>
</ul>
</li>
<li>File management
<ul>
<li>create file, delete file</li>
<li>open, close file</li>
<li>read, write, reposition</li>
<li>get and set file attributes</li>
</ul>
</li>
<li>Device management
<ul>
<li>request device, release device</li>
<li>read, write, reposition</li>
<li>get device attributes, set device attributes</li>
<li>logically attach or detach devices processes</li>
</ul>
</li>
<li>Information maintenance
<ul>
<li>get time or date, set time or date</li>
<li>get system data, set system data</li>
<li>get and set process, file, or device attributes</li>
</ul>
</li>
<li>Communications
<ul>
<li>create, delete communication connection</li>
<li>send, receive messages if message passing model to host name or process name
<ul>
<li>From client to server</li>
</ul>
</li>
<li>Shared-memory model create and gain access to memory regions</li>
<li>transfer status information</li>
<li>attach and detach remote devices</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/WYG0IUC.png" alt="" /></p>
<h2 id="program-stack"><a class="header" href="#program-stack">program stack</a></h2>
<p><img src="https://imgur.com/bNDtDUq.png" alt="" /></p>
<h2 id="linker-and-loader"><a class="header" href="#linker-and-loader">Linker and Loader</a></h2>
<ul>
<li>Source code compiled into object files designed to be loaded into
any physical memory location – relocatable object file</li>
<li>Linker combines these into single binary executable file
<ul>
<li>Also brings in libraries</li>
</ul>
</li>
<li>Modern general purpose systems don’t link libraries into executables
<ul>
<li>Rather, dynamically linked libraries (in Windows, <strong>DLLs</strong>) are loaded as needed, shared by all that use the same version of that same library (loaded once</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/5J9qm6P.png" alt="" /></p>
<h2 id="operating-system-structure"><a class="header" href="#operating-system-structure">Operating System Structure</a></h2>
<ul>
<li>Simple structure </li>
<li>Monolithic Structure More</li>
<li>Microkernel</li>
<li>Layered</li>
<li>Hybrid</li>
</ul>
<h3 id="traditional-unix-system-structure"><a class="header" href="#traditional-unix-system-structure">Traditional UNIX System Structure</a></h3>
<ul>
<li>UNIX: 
<ul>
<li>limited by hardware functionality, the original UNIX OS had limited structuring</li>
<li>Consists of everything below the system-call interface and above the physical hardware</li>
<li>Provides the file system, CPU scheduling, memory management, and other OS functions; a large number of functions for one level</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/DphRDJr.png" alt="" /></p>
<h3 id="linux-system-structure"><a class="header" href="#linux-system-structure">Linux System Structure</a></h3>
<p>Monolithic plus modular design</p>
<p><img src="https://imgur.com/oJfeysX.png" alt="" /></p>
<h3 id="microkernels"><a class="header" href="#microkernels">Microkernels</a></h3>
<ul>
<li>Moves as much from the kernel into user space</li>
<li>Mach is an example of microkernel
<ul>
<li>Mac OS X kernel (Darwin) partly based on Mach</li>
</ul>
</li>
<li>Benefits:
<ul>
<li>Easier to extend a microkernel</li>
<li>Easier to port the OS to new architectures</li>
<li>More reliable (less code is running in kernel mode)</li>
<li>More secure</li>
</ul>
</li>
<li>Detriments:
<ul>
<li>Performance overhead of user space to kernel space communication</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/01n47EV.png" alt="" /></p>
<h3 id="layered-approach"><a class="header" href="#layered-approach">Layered Approach</a></h3>
<ul>
<li>The OS is divided into a number of layers (levels), each built on top of lower layers
<ul>
<li>The bottom layer (layer 0), is the hardware</li>
<li>the highest (layer N) is the user interface</li>
</ul>
</li>
<li>With modularity, layers are selected such that each uses functions (operations) and services of only lower- level layers</li>
</ul>
<h3 id="hybrid-systems"><a class="header" href="#hybrid-systems">hybrid systems</a></h3>
<ul>
<li>Apple Mac OS X hybrid, layered, Aqua UI plus Cocoa programming environment</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>macOS iOS</th><th>darwin</th><th>android</th></tr></thead><tbody>
<tr><td><img src="https://imgur.com/gfCqyE7.png" alt="" /></td><td><img src="https://imgur.com/aK4VIQE.png" alt="" /></td><td><img src="https://imgur.com/On7lNGE.png" alt="" /></td></tr>
</tbody></table>
</div>
<h2 id="system-boot"><a class="header" href="#system-boot">System Boot</a></h2>
<ul>
<li>When power initialized on system, execution starts at a fixed memory location</li>
<li>Small piece of code 
<ul>
<li>bootstrap loader, BIOS, stored in ROM or EEPROM locates the kernel, loads it into memory, and starts it</li>
</ul>
</li>
<li>Modern systems replace BIOS with Unified Extensible Firmware Interface (UEFI)</li>
<li>Common bootstrap loader, GRUB</li>
</ul>
<h2 id="tracing"><a class="header" href="#tracing">tracing</a></h2>
<ul>
<li>strace – trace system calls invoked by a process</li>
<li>gdb – source-level debugger</li>
<li>perf – collection of Linux performance tools</li>
<li>tcpdump – collects network packets</li>
</ul>
<p><img src="https://imgur.com/tKHNWWx.png" alt="" /></p>
<h1 id="chapter-3-processes"><a class="header" href="#chapter-3-processes">Chapter 3: Processes</a></h1>
<ul>
<li>The program code, also called text section</li>
<li>Current activity including program counter, processor registers</li>
<li>Stack containing temporary data
<ul>
<li>Function parameters, return addresses, local variables</li>
</ul>
</li>
<li>Data section containing global variables</li>
<li>Heap containing memory dynamically allocated during run time
<img src="https://imgur.com/htrhvZO.png" alt="" /></li>
</ul>
<h2 id="process-state"><a class="header" href="#process-state">process state</a></h2>
<ul>
<li>new </li>
<li>running</li>
<li>waiting</li>
<li>ready:the process is waiting to be assigned to a processor</li>
<li>terminated</li>
</ul>
<p><img src="https://imgur.com/J2M646J.png" alt="" /></p>
<h2 id="process-scheduling"><a class="header" href="#process-scheduling">Process Scheduling</a></h2>
<h3 id="process-control-block-pcb-or-task-control-block"><a class="header" href="#process-control-block-pcb-or-task-control-block">Process Control Block (PCB) or task control block)</a></h3>
<p><img src="https://imgur.com/cykBgGg.png" alt="" /></p>
<h3 id="scheduling"><a class="header" href="#scheduling">scheduling</a></h3>
<ul>
<li>Goal – Maximize CPU use, quickly switch</li>
<li>processes onto CPU core
<ul>
<li>Maintains scheduling queues of processes</li>
<li>ready queue</li>
<li>wait queue</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/g4kYgaz.png" alt="" /></p>
<h3 id="context-switch"><a class="header" href="#context-switch">context switch</a></h3>
<ul>
<li>context-switch time is pure overhead; the system does no useful work while switching
<ul>
<li>The more complex the OS and the PCB  the longer the context switch</li>
</ul>
</li>
<li>Time dependent on hardware support
<ul>
<li>Some hardware provides multiple sets of registers per CPU  multiple contexts loaded at once</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/9YIOLxF.png" alt="" /></p>
<h2 id="operations-on-processes"><a class="header" href="#operations-on-processes">Operations on Processes</a></h2>
<p><img src="https://imgur.com/sRSoQ3J.png" alt="" /></p>
<h2 id="inter-process-communicationipc"><a class="header" href="#inter-process-communicationipc">Inter Process Communication(IPC)</a></h2>
<ul>
<li>shared memory</li>
<li>message passing</li>
</ul>
<h3 id="ipc-in-shared-memory-systems"><a class="header" href="#ipc-in-shared-memory-systems">IPC in Shared-Memory Systems</a></h3>
<ul>
<li>An area of memory shared among the processes that wish to communicate</li>
<li>The communication is under the control of the user processes not the OS</li>
</ul>
<h3 id="ipc-in-message-passing-systems"><a class="header" href="#ipc-in-message-passing-systems">IPC in Message-Passing Systems</a></h3>
<ul>
<li>Blocking is considered synchronous</li>
<li>Non-blocking is considered asynchronous</li>
</ul>
<h4 id="ordinary-pipes"><a class="header" href="#ordinary-pipes">Ordinary pipes</a></h4>
<ul>
<li>unidirectional(single direction)</li>
<li>cannot be accessed from outside the process that created it. 
<ul>
<li>Typically, a parent process creates a pipe and uses it to communicate with a child process that it created</li>
</ul>
</li>
</ul>
<h4 id="named-pipes"><a class="header" href="#named-pipes">named pipes</a></h4>
<ul>
<li>Communication is bidirectional</li>
<li>No parent-child relationship is necessary between the communicating processes</li>
</ul>
<h3 id="client-server-systems"><a class="header" href="#client-server-systems">Client-Server Systems</a></h3>
<div class="table-wrapper"><table><thead><tr><th>sockets</th><th>Remote Procedure Calls (RPC)</th></tr></thead><tbody>
<tr><td><img src="https://imgur.com/XZ4RMYg.png" alt="" /></td><td><img src="https://imgur.com/3ROwbAf.png" alt="" /></td></tr>
</tbody></table>
</div>
<h1 id="chapter-4-threads--concurrency"><a class="header" href="#chapter-4-threads--concurrency">Chapter 4: Threads &amp; Concurrency</a></h1>
<h2 id="concurrency-vs-parallelism"><a class="header" href="#concurrency-vs-parallelism">Concurrency vs. Parallelism</a></h2>
<p><img src="https://imgur.com/k8WxgPK.png" alt="" /></p>
<h2 id="multicore-programming"><a class="header" href="#multicore-programming">Multicore Programming</a></h2>
<ul>
<li>Data parallelism
<ul>
<li>different data, same operation on each data</li>
</ul>
</li>
<li>Task parallelism
<ul>
<li>different operation, same data</li>
</ul>
</li>
</ul>
<h2 id="amdahls-law"><a class="header" href="#amdahls-law">Amdahl’s Law</a></h2>
<p><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">parallel portion</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">speed up</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4288em;vertical-align:-1.1073em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.2377em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1073em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<img src="https://imgur.com/MLmgi8p.png" alt="" /></p>
<h2 id="multithreading-models"><a class="header" href="#multithreading-models">Multithreading Models</a></h2>
<ul>
<li>Many-to-One
<ul>
<li>One thread blocking causes all to block</li>
<li>example
<ul>
<li>solaris green threads</li>
<li>GUN portable threads</li>
</ul>
</li>
</ul>
</li>
<li>One-to-One
<ul>
<li>More concurrency than many-to-one</li>
<li>example
<ul>
<li>windows</li>
<li>linux</li>
</ul>
</li>
</ul>
</li>
<li>Many-to-Many
<ul>
<li>Windows with the ThreadFiber package</li>
</ul>
</li>
<li>two-level model
<ul>
<li>mix Many-to-Many and One-To-One</li>
</ul>
</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>Many-to-One</th><th>ono-to-one</th><th>Many-to-Many</th><th>two-level model</th></tr></thead><tbody>
<tr><td><img src="https://imgur.com/SKAyDBk.png" alt="" /></td><td><img src="https://imgur.com/0AwwxsV.png" alt="" /></td><td><img src="https://imgur.com/Qdqesbf.png" alt="" /></td><td><img src="https://imgur.com/aX6oEDw.png" alt="" /></td></tr>
</tbody></table>
</div>
<h2 id="implicit-threading"><a class="header" href="#implicit-threading">Implicit threading</a></h2>
<ul>
<li>Thread Pools
<ul>
<li>Create a number of threads in a pool where they await work</li>
</ul>
</li>
<li>Fork-Join Parallelism</li>
<li>OpenMP</li>
<li>Grand Central Dispatch
<ul>
<li>dispatch queues</li>
<li>macOS,iOS</li>
</ul>
</li>
</ul>
<h1 id="chapter-5-cpu-scheduling"><a class="header" href="#chapter-5-cpu-scheduling">Chapter 5: CPU Scheduling</a></h1>
<h2 id="cpu-scheduler"><a class="header" href="#cpu-scheduler">CPU scheduler</a></h2>
<ul>
<li>CPU utilization 
<ul>
<li>keep the CPU as busy as possible</li>
</ul>
</li>
<li>Throughput 
<ul>
<li>of processes that complete their execution per time unit</li>
</ul>
</li>
<li>Turnaround time 
<ul>
<li>amount of time to execute a particular process</li>
<li>turnaround time = completion time – arrival time</li>
</ul>
</li>
<li>Waiting time 
<ul>
<li>amount of time a process has been waiting in the ready queue</li>
<li>waiting time = turnaround time  –  burst time</li>
</ul>
</li>
<li>Response time 
<ul>
<li>amount of time it takes from when a request was submitted until the first response is produce</li>
<li>response time = start time – arrival time</li>
</ul>
</li>
</ul>
<p>CPU scheduling decisions may take place when a process:</p>
<ol>
<li>Switches from running to waiting state</li>
<li>Switches from running to ready state</li>
<li>Switches from waiting to ready</li>
<li>Terminates</li>
</ol>
<h3 id="preemptive"><a class="header" href="#preemptive">Preemptive</a></h3>
<ul>
<li>preemptive
<ul>
<li>can result in race conditions </li>
<li>linux,windows,MacOS</li>
</ul>
</li>
<li>nonpreemptive
<ul>
<li>only under circumstances 1 and 4</li>
</ul>
</li>
</ul>
<h3 id="dispatcher"><a class="header" href="#dispatcher">Dispatcher</a></h3>
<ul>
<li>witching context</li>
<li>Switching to user mode</li>
<li>Jumping to the proper location in the user program to restart that program</li>
</ul>
<p>Dispatch latency =time it take to stop one process and start another running</p>
<h3 id="scheduling-algorithm"><a class="header" href="#scheduling-algorithm">Scheduling Algorithm</a></h3>
<ul>
<li>Max CPU utilization</li>
<li>Max throughput</li>
<li>Min turnaround time</li>
<li>Min waiting time</li>
<li>Min response time</li>
</ul>
<h4 id="determining-length-of-next-cpu-burst"><a class="header" href="#determining-length-of-next-cpu-burst">Determining Length of Next CPU Burst</a></h4>
<ul>
<li>exponential averaging
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">CPU burst time</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">predict CPU burst time</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1132em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span></span></span></span></span></span></span>
<img src="https://imgur.com/Xe9SWHB.png" alt="" /></li>
</ul>
<h4 id="first--come-first-servedfcfs-scheduling"><a class="header" href="#first--come-first-servedfcfs-scheduling">First- Come, First-Served(FCFS) Scheduling</a></h4>
<p><img src="https://imgur.com/JyiYt2l.png" alt="" /></p>
<p><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Waiting time </span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">24</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">27</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Average waiting time</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">24</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">27</span><span class="mclose">)</span><span class="mord">/3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">17</span></span></span></span></span></p>
<ul>
<li>Convoy effect short process behind long process
<ul>
<li>Consider one CPU-bound and many I/O-bound processes</li>
</ul>
</li>
</ul>
<h4 id="shortest-job-firstsjf-scheduling"><a class="header" href="#shortest-job-firstsjf-scheduling">Shortest-Job-First(SJF) Scheduling</a></h4>
<ul>
<li>minimum average waiting time for a given set of processes</li>
</ul>
<h4 id="shortest-remaining-time-firstpreemptive-sjf"><a class="header" href="#shortest-remaining-time-firstpreemptive-sjf">shortest-remaining-time-first(Preemptive SJF)</a></h4>
<div class="table-wrapper"><table><thead><tr><th>process</th><th>arrival time</th><th>burst time</th></tr></thead><tbody>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>0</td><td>8</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>1</td><td>4</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>2</td><td>9</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>3</td><td>5</td></tr>
</tbody></table>
</div>
<p><img src="https://imgur.com/rX2gkk8.png" alt="" />
<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Average waiting time</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">17</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">3</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6.5</span></span></span></span></span></p>
<h4 id="round-robin-rr"><a class="header" href="#round-robin-rr">Round Robin (RR)</a></h4>
<ul>
<li>Each process gets a small unit of CPU time (time quantum q), usually 10-100 milliseconds
<ul>
<li>After this time has elapsed, the process is preempted and added to the end of the ready queue</li>
</ul>
</li>
<li>Typically, higher average turnaround than <code>SJF</code>, but better response</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>process</th><th>burst time</th></tr></thead><tbody>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>8</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>4</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>9</td></tr>
</tbody></table>
</div>
<p><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Time Quantum </span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></span></p>
<p><img src="https://imgur.com/9BuK5sE.png" alt="" /></p>
<h4 id="priority-scheduling"><a class="header" href="#priority-scheduling">Priority Scheduling</a></h4>
<ul>
<li>The CPU is allocated to the process with the highest priority</li>
<li><code>SJF</code> is priority scheduling where priority is the inverse of predicted next CPU burst time</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>process</th><th>burst time</th><th>priority</th></tr></thead><tbody>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>10</td><td>3</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>1</td><td>1</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>2</td><td>4</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>1</td><td>5</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>5</td><td>2</td></tr>
</tbody></table>
</div>
<p><img src="https://imgur.com/c9WBCw6.png" alt="" /></p>
<p><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Average waiting time</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8.2</span></span></span></span></span></p>
<h4 id="priority-scheduling--round-robin"><a class="header" href="#priority-scheduling--round-robin">Priority Scheduling + Round-Robin</a></h4>
<ul>
<li>Run the process with the highest priority</li>
<li>Processes with the same priority run round-robin</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>process</th><th>burst time</th><th>priority</th></tr></thead><tbody>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>7</td><td>1</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>5</td><td>2</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>8</td><td>2</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>4</td><td>3</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>3</td><td>3</td></tr>
</tbody></table>
</div>
<p><img src="https://imgur.com/2APRd2W.png" alt="" /></p>
<h4 id="multilevel-queue"><a class="header" href="#multilevel-queue">Multilevel Queue</a></h4>
<p><img src="https://imgur.com/dUAJQze.png" alt="" /></p>
<h3 id="multiple-processor-scheduling"><a class="header" href="#multiple-processor-scheduling">Multiple-Processor Scheduling</a></h3>
<ul>
<li>Multicore CPUs</li>
<li>Multithreaded cores</li>
<li>NUMA(non-uniform memory access) systems</li>
<li>Heterogeneous multiprocessing</li>
</ul>
<h4 id="smp"><a class="header" href="#smp">SMP</a></h4>
<ul>
<li>Symmetric multiprocessing (SMP) is where each processor is self-scheduling
<ul>
<li>(a) All threads may be in a common ready queue</li>
<li>(b) Each processor may have its own private queue of threads</li>
</ul>
</li>
<li>keep all CPUs loaded for efficiency
<ul>
<li>Load balancing 
<ul>
<li>attempts to keep workload evenly distributed</li>
</ul>
</li>
<li>push migration
<ul>
<li>pushes task from overloaded CPU to other CPUs</li>
</ul>
</li>
<li>pull migration
<ul>
<li>idle processors pulls waiting task from busy processor</li>
</ul>
</li>
</ul>
</li>
<li>processor affinity
<ul>
<li>Soft affinity 
<ul>
<li>the OS attempts to keep a thread running on the same processor, but no guarantees</li>
</ul>
</li>
<li>Hard affinity 
<ul>
<li>allows a process to specify a set of processors it may run on</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/RoN2QeB.png" alt="" /></p>
<h5 id="hyperthreading"><a class="header" href="#hyperthreading">hyperthreading</a></h5>
<p><img src="https://imgur.com/E5dFCfH.png" alt="" /></p>
<h3 id="real-time-scheduling"><a class="header" href="#real-time-scheduling">real-time scheduling</a></h3>
<ul>
<li>Real-Time system
<ul>
<li>soft real-time system
<ul>
<li>but no guarantee as to when tasks will be scheduled</li>
</ul>
</li>
<li>hard real-time system
<ul>
<li>task must be serviced by its deadline</li>
</ul>
</li>
</ul>
</li>
<li>latency
<ul>
<li>Interrupt latency
<ul>
<li>time of stop process to another process</li>
</ul>
</li>
<li>Dispatch latency
<ul>
<li>take current process off CPU and switch to another CPU</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="earliest-deadline-first-scheduling-edf"><a class="header" href="#earliest-deadline-first-scheduling-edf">Earliest Deadline First Scheduling (EDF)</a></h4>
<ul>
<li>Priorities are assigned according to deadlines:
<ul>
<li>the earlier the deadline, the higher the priority</li>
<li>the later the deadline, the lower the priority</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/yJcNMLU.png" alt="" /></p>
<h2 id="operating-system--examples"><a class="header" href="#operating-system--examples">Operating System  Examples</a></h2>
<h3 id="linux-scheduling"><a class="header" href="#linux-scheduling">linux scheduling</a></h3>
<ul>
<li>Completely Fair Scheduler (CFS)
<ul>
<li>CFS scheduler maintains per task virtual run time in variable vruntime</li>
<li>To decide next task to run, scheduler picks task with lowest virtual run time</li>
</ul>
</li>
<li>Linux supports load balancing, but is also NUMA-aware</li>
</ul>
<h3 id="solaris-scheduling"><a class="header" href="#solaris-scheduling">solaris scheduling</a></h3>
<ul>
<li>priority-based scheduling</li>
<li>Six classes available
<ul>
<li>Time sharing (default) (TS)</li>
<li>Interactive (IA)</li>
<li>Real time (RT)</li>
<li>System (SYS)</li>
<li>Fair Share (FSS)</li>
<li>Fixed priority (FP)</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/YoUCDym.png" alt="" /></p>
<h1 id="chapter-6-synchronization-tools"><a class="header" href="#chapter-6-synchronization-tools">Chapter 6: Synchronization Tools</a></h1>
<h2 id="race-condition"><a class="header" href="#race-condition">Race condition</a></h2>
<p><img src="https://imgur.com/64HhNAf.png" alt="" /></p>
<ul>
<li><code>critical section</code> segment of code
<ul>
<li>Process may be changing common variables, updating table, writing file, etc</li>
<li>When one process in critical section, no other may be in its critical section</li>
</ul>
</li>
</ul>
<h2 id="critical-section-problem"><a class="header" href="#critical-section-problem">Critical-Section Problem</a></h2>
<ul>
<li>Mutual Exclusion
<ul>
<li>If process is executing in its critical section, then no other processes can be executing in their critical sections</li>
</ul>
</li>
<li>Progress
<ul>
<li>if not process in critical section and have process want to enter critical section then have to let the process</li>
</ul>
</li>
<li>Bounded Waiting
<ul>
<li>the time process wait to enter critical section have to limit(cant wait forever)</li>
</ul>
</li>
</ul>
<h3 id="software-solution"><a class="header" href="#software-solution">software solution</a></h3>
<ul>
<li>cant avoid shared variable be override value by another process</li>
<li>Entry section: disable interrupts</li>
<li>Exit section: enable interrupts</li>
</ul>
<h4 id="part-of-solution"><a class="header" href="#part-of-solution">part of Solution</a></h4>
<ul>
<li>
<p>Assume that the <code>load</code> and <code>store</code> machine-language instructions are <code>atomic</code></p>
<ul>
<li>Which cannot be interrupted</li>
</ul>
</li>
<li>
<p><code>turn</code> indicates whose turn it is to enter the critical section</p>
</li>
<li>
<p>two process have enter critical section in turn
<img src="https://imgur.com/wUlw82E.png" alt="" /></p>
</li>
</ul>
<h4 id="petersons-solution"><a class="header" href="#petersons-solution">Peterson’s Solution</a></h4>
<ul>
<li>Assume that the <code>load</code> and <code>store</code> machine-language instructions are <code>atomic</code>
<ul>
<li>Which cannot be interrupted</li>
</ul>
</li>
<li><code>turn</code> indicates whose turn it is to enter the critical section</li>
<li><code>flag</code> array is used to indicate if a process is ready to enter the critical section</li>
<li>solve <code>critical section problem</code> 
<ul>
<li>Mutual exclusion</li>
<li>progress</li>
<li>bounded-waiting</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/HPf3Vfc.png" alt="" /></p>
<h4 id="memory-barrier"><a class="header" href="#memory-barrier">Memory Barrier</a></h4>
<ul>
<li>Memory models may be either:
<ul>
<li>Strongly ordered – where a memory modification of one processor is immediately visible to all other processors</li>
<li>Weakly ordered – where a memory modification of one processor may not be immediately visible to all other processors</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/Mmz1N51.png" alt="" /></p>
<h4 id="mutex-locks"><a class="header" href="#mutex-locks">Mutex Locks</a></h4>
<ul>
<li>First acquire() a lock</li>
<li>Then release() the lock</li>
<li><code>busy waiting</code>
<ul>
<li>the process will be block and continuous check is lock </li>
<li><code>spinlock</code> when is lock free will automatic let the waiting process know</li>
</ul>
</li>
</ul>
<h4 id="semaphore"><a class="header" href="#semaphore">semaphore</a></h4>
<ul>
<li>wait()</li>
<li>signal()</li>
<li>Counting semaphore
<ul>
<li>integer value can range over an unrestricted domain</li>
</ul>
</li>
<li>Binary semaphore 
<ul>
<li>integer value can range only between 0 and 1</li>
<li>Same as a mutex lock</li>
</ul>
</li>
<li>Must guarantee that no two processes can execute the <code>wait()</code> and <code>signal()</code> on the same semaphore at the same time</li>
</ul>
<h5 id="semaphore-implementation-with-no-busy-waiting"><a class="header" href="#semaphore-implementation-with-no-busy-waiting">Semaphore Implementation with no Busy waiting</a></h5>
<ul>
<li>block()
<ul>
<li>place the process invoking the operation on the appropriate waiting queue</li>
</ul>
</li>
<li>wakeup()
<ul>
<li>remove one of processes in the waiting queue and place it in the ready queue</li>
</ul>
</li>
</ul>
<h3 id="synchronization-hardware"><a class="header" href="#synchronization-hardware">Synchronization Hardware</a></h3>
<ul>
<li>Hardware instruction
<ul>
<li>Atomic Swap()</li>
<li>Test and Set()</li>
</ul>
</li>
<li>Atomic variables</li>
</ul>
<h4 id="hardware-instruction"><a class="header" href="#hardware-instruction">Hardware instruction</a></h4>
<h4 id="atomic-variables"><a class="header" href="#atomic-variables">Atomic variables</a></h4>
<ul>
<li>atomic variable that provides atomic (uninterruptible) updates on basic data types such as integers and booleans</li>
</ul>
<h2 id="deadlock"><a class="header" href="#deadlock">deadlock</a></h2>
<p><img src="https://imgur.com/O58l3oJ.png" alt="" /></p>
<ul>
<li>deadlock
<ul>
<li>two or more processes are waiting indefinitely for an event that can be caused by only one of the waiting processes</li>
<li>Starvation 
<ul>
<li>indefinite blocking</li>
<li>A process may never be removed from the semaphore queue in which it is suspended</li>
</ul>
</li>
<li>Priority Inversion 
<ul>
<li>Scheduling problem when lower-priority process holds a lock needed by higher-priority process</li>
<li>Solved via priority-inheritance protocol</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="chapter-7-synchronization-examples"><a class="header" href="#chapter-7-synchronization-examples">Chapter 7: Synchronization Examples</a></h1>
<h2 id="problems-of-synchronization"><a class="header" href="#problems-of-synchronization">Problems of Synchronization</a></h2>
<p>Most of the synchronization problems do not exist in
functional languages</p>
<ul>
<li>Bounded-Buffer Problem (Producer-consumer problem)</li>
<li>Readers and Writers Problem</li>
<li>Dining-Philosophers Problem</li>
</ul>
<h2 id="os"><a class="header" href="#os">OS</a></h2>
<ul>
<li>windows
<ul>
<li>spinlocks</li>
<li>dispatcher object</li>
</ul>
</li>
<li>linux 
<ul>
<li>Atomic integers</li>
<li>Mutex locks</li>
<li>Spinlocks, Semaphores</li>
<li>Reader-writer versions of both</li>
</ul>
</li>
<li>POSIX
<ul>
<li>mutex locks</li>
<li>semaphores
<ul>
<li>named
<ul>
<li>can be used by unrelated processes</li>
</ul>
</li>
<li>unnamed
<ul>
<li>can be used only by threads in the same process</li>
</ul>
</li>
</ul>
</li>
<li>condition variable</li>
</ul>
</li>
</ul>
<h1 id="chapter-8-deadlocks"><a class="header" href="#chapter-8-deadlocks">Chapter 8: Deadlocks</a></h1>
<h2 id="deadlock-characterization"><a class="header" href="#deadlock-characterization">Deadlock Characterization</a></h2>
<ul>
<li>Mutual exclusion
<ul>
<li>only one process at a time can use a resource</li>
</ul>
</li>
<li>Hold and wait
<ul>
<li>a process holding at least one resource is waiting to acquire additional resources held by other processes</li>
</ul>
</li>
<li>No preemption
<ul>
<li>a resource can be released only voluntarily by the process holding it, after that process has completed its task</li>
</ul>
</li>
<li>Circular wait
<ul>
<li>there exists a set {P0, P1, …, Pn} of waiting processes such that:</li>
</ul>
</li>
</ul>
<h2 id="deadlocks-prevention"><a class="header" href="#deadlocks-prevention">Deadlocks Prevention</a></h2>
<ul>
<li>mutual exclusion
<ul>
<li>not required for sharable resources (e.g., read-only files); must hold for non-sharable resource</li>
</ul>
</li>
<li>hold and wait
<ul>
<li>must guarantee that whenever a process requests a resource, it does not hold any other resources</li>
</ul>
</li>
<li>No Preemption
<ul>
<li>If a process that is holding some resources requests another resource that cannot be immediately allocated to it, then all resources currently being held are released</li>
</ul>
</li>
<li>Circular Wai
<ul>
<li>check is have circular wait or not </li>
</ul>
</li>
</ul>
<h2 id="deadlock-avoidance"><a class="header" href="#deadlock-avoidance">Deadlock Avoidance</a></h2>
<ul>
<li><strong>Cant do Preventon，have to check in run time</strong></li>
<li>The goal for deadlock avoidance is to the system must not enter an unsafe state.</li>
<li>each process declares the maximum number of resources of each type that it may need</li>
<li>deadlock-avoidance algorithm dynamically examines the resource-allocation state to ensure that there can never be a circular-wait condition</li>
</ul>
<h2 id="safe-state"><a class="header" href="#safe-state">safe state</a></h2>
<ul>
<li>safe state 
<ul>
<li>no deadlock</li>
</ul>
</li>
<li>unsafe state
<ul>
<li>possibility of deadlock</li>
</ul>
</li>
<li>Avoidance Algorithms
<ul>
<li>Single instance of a resource type
<ul>
<li><code>resource-allocation graph</code></li>
</ul>
</li>
<li>Multiple instances of a resource type
<ul>
<li>Banker’s Algorithm</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/1fRZ96o.png" alt="" /></p>
<h3 id="resource-allocation-graph"><a class="header" href="#resource-allocation-graph">Resource-Allocation Graph</a></h3>
<p><img src="https://imgur.com/1pkLAOD.png" alt="" /></p>
<ul>
<li>graph contains no cycles
<ul>
<li>no deadlock</li>
</ul>
</li>
<li>graph contains a cycle
<ul>
<li>only one instance per resource type, then deadlock</li>
<li>several instances per resource type, possibility of deadlock</li>
</ul>
</li>
</ul>
<h3 id="bankers-algorithm"><a class="header" href="#bankers-algorithm">Banker’s Algorithm</a></h3>
<ul>
<li>Max: request resource count to finish task</li>
<li>Allocation: currently occupy resource count </li>
<li>Need: Max-Allocation resource count</li>
<li>Available: free count of resource type </li>
</ul>
<h4 id="resource-request-algorithm"><a class="header" href="#resource-request-algorithm">Resource-Request Algorithm</a></h4>
<h4 id="example"><a class="header" href="#example">example</a></h4>
<ul>
<li>total available A (10 instances), B (5 instances), and C (7 instances)</li>
<li>safe sequence:<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>unsafe sequence:<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
<!-- * when task finish will release allocation resource then will have more  -->
<div class="table-wrapper"><table><thead><tr><th>task</th><th>allocation</th><th>max</th><th>need</th><th>available</th><th>order</th></tr></thead><tbody>
<tr><td></td><td>A,B,C</td><td>A,B,C</td><td>A,B,C</td><td>A,B,C</td><td></td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>0,1,0</td><td>7,5,3</td><td>7,4,3</td><td>7,4,5=( (7,4,3) + (0,0,2) )</td><td>3</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>2,0,0</td><td>3,2,2</td><td>1,2,2</td><td>3,3,2=( (10,5,7) - (7,2,5) )</td><td>0</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>3,0,2</td><td>9,0,2</td><td>6,0,2</td><td>7,5,5=( (7,4,5) + (0,1,0) )</td><td>4</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>2,1,1</td><td>2,2,2</td><td>0,1,1</td><td>5,3,2=( (3,3,2) + (2,0,0) )</td><td>1</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>0,0,2</td><td>4,3,3</td><td>4,3,1</td><td>7,4,3=( (5,3,2) + (2,1,1) )</td><td>2</td></tr>
</tbody></table>
</div>
<h2 id="deadlock-detection"><a class="header" href="#deadlock-detection">Deadlock Detection</a></h2>
<h3 id="single-instance"><a class="header" href="#single-instance">Single instance</a></h3>
<p><img src="https://imgur.com/mhFVJYh.png" alt="" /></p>
<h3 id="multiple-instances"><a class="header" href="#multiple-instances">Multiple instances:</a></h3>
<ul>
<li>Total instances: A:7, B:2, C:6</li>
<li>Available instances: A:0, B:0, C:0</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>task</th><th>allocation</th><th>request/need</th></tr></thead><tbody>
<tr><td></td><td>A,B,C</td><td>A,B,C</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>0,1,0</td><td>0,0,0</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>2,0,0</td><td>2,0,2</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>3,0,3</td><td>0,0,0</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>2,1,1</td><td>1,0,0</td></tr>
<tr><td><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td>0,0,2</td><td>0,0,2</td></tr>
</tbody></table>
</div>
<h2 id="deadlock-recovery"><a class="header" href="#deadlock-recovery">Deadlock Recovery</a></h2>
<ul>
<li>Process termination
<ul>
<li>Abort all deadlocked processes</li>
<li>Abort one process at a time until the deadlock cycle is eliminated</li>
<li>In which order should we choose to abort?
<ul>
<li>Priority of the process</li>
<li>How long process has computed</li>
<li>Resources the process has used</li>
</ul>
</li>
</ul>
</li>
<li>Resource preemption
<ul>
<li>Selecting a victim 
<ul>
<li>minimize cost</li>
</ul>
</li>
<li>Rollback
<ul>
<li>return to some safe state, restart process for that state</li>
</ul>
</li>
<li>Starvation 
<ul>
<li>same process may always be picked as victim, so we should include number of rollbacks in cost factor</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="chapter-9-main-memory"><a class="header" href="#chapter-9-main-memory">Chapter 9: Main Memory</a></h1>
<ul>
<li>The only storage CPU can access directly
<ul>
<li>Register access is done in one CPU clock (or less)</li>
<li>Main memory can take many cycles, causing a stall</li>
<li>Cache sits between main memory and CPU registers</li>
</ul>
</li>
</ul>
<h2 id="protection"><a class="header" href="#protection">Protection</a></h2>
<ul>
<li>need to ensure that a process can only access those addresses in its address space</li>
<li>we can provide this protection by using a pair of base and limit registers defining the logical address space of a process</li>
<li>CPU must check every memory access generated in user mode to be sure it is between base and limit for that user</li>
</ul>
<p><img src="https://imgur.com/2FwxklS.png" alt="" /></p>
<h2 id="logical-vs-physical-address"><a class="header" href="#logical-vs-physical-address">Logical vs. Physical Address</a></h2>
<ul>
<li>Logical address/virtual address
<ul>
<li>generated by the CPU</li>
</ul>
</li>
<li>Physical address
<ul>
<li>address seen by the memory unit</li>
</ul>
</li>
<li>Logical and physical addresses are the same in compile- time and load-time address-binding schemes; they differ in execution-time address-binding scheme</li>
</ul>
<h3 id="memory-management-unit"><a class="header" href="#memory-management-unit">Memory-Management Unit</a></h3>
<p><img src="https://imgur.com/D3qyVEv.png" alt="" /></p>
<h2 id="how-to-refer-memory-in-a-program--address-binding"><a class="header" href="#how-to-refer-memory-in-a-program--address-binding">How to refer memory in a program – Address Binding</a></h2>
<p><img src="https://imgur.com/0tMyZIO.png" alt="" /></p>
<ul>
<li>compile time</li>
<li>load time</li>
<li>execution time</li>
</ul>
<h2 id="how-to-load-a-program-into-memory--staticdynamic-loading-and-linking"><a class="header" href="#how-to-load-a-program-into-memory--staticdynamic-loading-and-linking">How to load a program into memory – static/dynamic loading and linking</a></h2>
<ul>
<li>Dynamic Loading
<ul>
<li>load function instruct when need to use</li>
<li>better memory space</li>
</ul>
</li>
<li>Static Linking
<ul>
<li>duplicate same function instruct to memory in <code>compile time</code></li>
</ul>
</li>
<li>Dynamic Linking
<ul>
<li>runtime link function address</li>
<li>DLL(Dynamic link library) in window</li>
</ul>
</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>Dynamic Loading</th><th>Static Linking</th><th>Dynamic Linking</th></tr></thead><tbody>
<tr><td><img src="https://imgur.com/q5gW8TF.png" alt="" /></td><td><img src="https://imgur.com/BrL1XIu.png" alt="" /></td><td><img src="https://i.imgur.com/dDe4AEV.png" alt="" /></td></tr>
</tbody></table>
</div>
<h2 id="contiguous-memory-allocation"><a class="header" href="#contiguous-memory-allocation">Contiguous Memory Allocation</a></h2>
<h3 id="variable-partition"><a class="header" href="#variable-partition">Variable-partition</a></h3>
<h3 id="dynamic-storage-allocation-problem"><a class="header" href="#dynamic-storage-allocation-problem">Dynamic Storage Allocation Problem</a></h3>
<ul>
<li>First-fit: Allocate the first hole that is big enough</li>
<li>Best-fit: Allocate the smallest hole that is big enough; must search entire list, unless ordered by size</li>
<li>Produces the smallest leftover hole</li>
<li>Worst-fit: Allocate the largest hole; must also search entire list</li>
<li>Produces the largest leftover hole</li>
</ul>
<h4 id="fragmentation"><a class="header" href="#fragmentation">Fragmentation</a></h4>
<ul>
<li>External fragmentation 
<ul>
<li>problem of variable-allocation</li>
<li>free memory space enough to size but is not contiguous</li>
<li>compaction</li>
</ul>
</li>
<li>Internal fragmentation
<ul>
<li>problem of fix-partition-allocation</li>
<li>memory not use by process</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/hUMguQT.png" alt="" /></p>
<h2 id="non-contiguous-memory-allocation"><a class="header" href="#non-contiguous-memory-allocation">Non-Contiguous Memory Allocation</a></h2>
<h3 id="paging"><a class="header" href="#paging">Paging</a></h3>
<ul>
<li>Divide physical memory into fixed-sized blocks called <code>frame</code>
<ul>
<li>size is power of 2, between 512 bytes and 16M bytes</li>
</ul>
</li>
<li>Divide logical memory into blocks of same size called <code>pages</code></li>
<li>To run a program of size N pages, need to find N free frames and load program</li>
<li>benefit
<ul>
<li>process of physical-address space can be non-contiguous</li>
<li>avoid external fragmentation</li>
</ul>
</li>
</ul>
<h4 id="page-table"><a class="header" href="#page-table">Page table</a></h4>
<ul>
<li>Page table only contain the page own by process</li>
<li>process cant access memory that is not in </li>
<li>Page table is kept in main memory
<ul>
<li>Page-table base register (PTBR) 
<ul>
<li>points to the page table</li>
</ul>
</li>
<li>Page-table length register (PTLR) 
<ul>
<li>indicates size of the page table</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/vPdD4cn.png" alt="" /></p>
<h5 id="translation-look-aside-buffer-tlb"><a class="header" href="#translation-look-aside-buffer-tlb">Translation Look-aside Buffer (TLB)</a></h5>
<ul>
<li>The two-memory access problem can be solved by the use of a special fast-lookup hardware cache called translation look-aside buffers (TLBs) (also called associative memory)</li>
<li>In this scheme every data/instruction access requires <code>two memory accesses</code>
<img src="https://imgur.com/ono9w1b.png" alt="" /></li>
</ul>
<h4 id="address-translation-scheme"><a class="header" href="#address-translation-scheme">address translation scheme</a></h4>
<p><img src="https://imgur.com/8P3rtfY.png" alt="" /></p>
<ul>
<li>Page number(p)
<ul>
<li>each process can have <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> page (32-bit computer one process can use 4GB memory)</li>
</ul>
</li>
<li>Page offset(d)
<ul>
<li>combined with base address to define the physical memory address that is sent to the memory unit</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/8r3OVMT.png" alt="" /></p>
<ul>
<li>給定一個 32-bits 的 logical address，36 bits 的 physical address 以及 4KB 的 page size，這代表？
<ul>
<li>page table size = <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">32</span></span></span></span></span></span></span></span></span></span></span></span> / <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span> = <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">20</span></span></span></span></span></span></span></span></span></span></span></span> 個 entries</li>
<li>Max program memory: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">32</span></span></span></span></span></span></span></span></span></span></span></span> = 4GB</li>
<li>Total physical memory size = <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">36</span></span></span></span></span></span></span></span></span></span></span></span> = 64GB</li>
<li>Number of bits for page number = <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">32</span></span></span></span></span></span></span></span></span></span></span></span>/<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span>=<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">20</span></span></span></span></span></span></span></span></span></span></span></span> pages -&gt; 20 bits</li>
<li>Number of bits for frame number =<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">36</span></span></span></span></span></span></span></span></span></span></span></span>/<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span>= <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span></span></span></span></span></span></span></span></span></span></span></span> frames -&gt; 24 bits</li>
<li>Number of bits for page offset = 4KB page size = <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span> bytes -&gt; 12 bits</li>
</ul>
</li>
</ul>
<h4 id="shared-pages"><a class="header" href="#shared-pages">Shared Pages</a></h4>
<ul>
<li>Shared code
<ul>
<li>One copy of read-only (reentrant) code shared among processes </li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/aWcluQQ.png" alt="" /></p>
<h1 id="chapter-10-virtual-memory"><a class="header" href="#chapter-10-virtual-memory">Chapter 10: Virtual Memory</a></h1>
<ul>
<li>Code needs to be in memory to execute, but entire program rarely used</li>
<li>Program no longer constrained by limits of physical memory</li>
<li>Consider ability to execute partially-loaded program</li>
</ul>
<h2 id="virtual-memory"><a class="header" href="#virtual-memory">virtual memory</a></h2>
<ul>
<li>Only part of the program needs to be in memory for execution</li>
<li>Logical address space can therefore be much larger than physical address space</li>
<li>Allows address spaces to be shared by several processes</li>
<li>Allows for more efficient process creation</li>
<li>More programs running concurrently</li>
<li>Less I/O needed to load or swap processes</li>
<li>Virtual memory can be implemented via:
<ul>
<li><strong>Demand paging</strong></li>
<li><strong>Demand segmentation</strong></li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/9dwYNmf.png" alt="" /></p>
<h3 id="demand-paging"><a class="header" href="#demand-paging">Demand Paging</a></h3>
<ul>
<li>Page is needed</li>
<li>Lazy swapper
<ul>
<li>never swaps a page into memory unless page will be needed</li>
<li>store in swap(disk)</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/mGdRBK7.png" alt="" /></p>
<h4 id="valid-invalid-bit"><a class="header" href="#valid-invalid-bit">valid-invalid bit</a></h4>
<ul>
<li>During MMU address translation, if valid–invalid bit in page table entry is i =&gt; page fault</li>
</ul>
<p><img src="https://imgur.com/17xeTLe.png" alt="" /></p>
<h4 id="page-fault"><a class="header" href="#page-fault">page fault</a></h4>
<ul>
<li>page table that request are not in memory</li>
</ul>
<p><img src="https://imgur.com/SbHL2P4.png" alt="" /></p>
<h4 id="free-frame-list"><a class="header" href="#free-frame-list">free-frame list</a></h4>
<ul>
<li>when page fault occurs, the OS must bring the desired page from secondary storage into main memory</li>
<li>Most OS maintain a free-frame list – a pool of free frames for satisfying such requests</li>
<li>zero-fill-on-demand
<ul>
<li>the content of the frames zeroed-out before being allocated</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/zBA3ENF.png" alt="" /></p>
<h4 id="performance-of-demand-paging"><a class="header" href="#performance-of-demand-paging">Performance of Demand Paging</a></h4>
<ul>
<li>Memory access time = 200 nanoseconds</li>
<li>Average page-fault service time = 8000 nanoseconds</li>
<li>p = page fault probability</li>
<li>Effective Access Time = (1 – p) x 200 + p (8000)</li>
</ul>
<h4 id="demand-paging-optimizations"><a class="header" href="#demand-paging-optimizations">Demand Paging Optimizations</a></h4>
<ul>
<li>Swap space I/O faster than file system I/O even if on the same device</li>
<li>Swap allocated in larger chunks, less management needed than file system</li>
</ul>
<h4 id="copy-on-write"><a class="header" href="#copy-on-write">Copy-on-Write</a></h4>
<ul>
<li>allows both parent and child processes to initially share the same pages in memory
<ul>
<li>If either process modifies a shared page, only then is the page copied</li>
</ul>
</li>
<li>vfork() variation on fork()system call has parent suspend and child using copy-on-write address space of parent
<ul>
<li>Designed to have child call exec()</li>
<li>Very efficient</li>
</ul>
</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>origin</th><th>Process 1 Modifies Page C</th></tr></thead><tbody>
<tr><td><img src="https://imgur.com/iKfUhcA.png" alt="" /></td><td><img src="https://imgur.com/F1bGgY4.png" alt="" /></td></tr>
</tbody></table>
</div>
<h4 id="page-replacement"><a class="header" href="#page-replacement">Page Replacement</a></h4>
<ol>
<li>if There is no Free Frame</li>
<li>use a page replacement algorithm to select a victim frame</li>
<li>Write victim frame to disk if dirty</li>
<li>Bring the desired page into the (newly) free frame; update the page and frame tables</li>
<li>Continue the process by restarting the instruction that caused the trap</li>
</ol>
<p><img src="https://imgur.com/LvuZt5C.png" alt="" /></p>
<h5 id="fifo-algorithm"><a class="header" href="#fifo-algorithm">FIFO Algorithm</a></h5>
<ul>
<li>first in first out</li>
</ul>
<p><img src="https://imgur.com/KHG2Vip.png" alt="" /></p>
<h5 id="optimal-algorithm"><a class="header" href="#optimal-algorithm">Optimal Algorithm</a></h5>
<ul>
<li>Replace page that will not be used for longest period of time</li>
<li>stack algorithms</li>
</ul>
<p><img src="https://imgur.com/JFrOvnS.png" alt="" /></p>
<h5 id="least-recently-used-lru-algorithm"><a class="header" href="#least-recently-used-lru-algorithm">Least Recently Used (LRU) Algorithm</a></h5>
<ul>
<li>Replace page that has not been used in the most amount of time</li>
<li>stack algorithms</li>
</ul>
<p><img src="https://imgur.com/NBqQeog.png" alt="" /></p>
<h5 id="second-chance-algorithm"><a class="header" href="#second-chance-algorithm">Second-chance Algorithm</a></h5>
<ul>
<li>If page to be replaced has
<ul>
<li>Reference bit = 0 -&gt; replace it</li>
<li>reference bit = 1 then:
<ul>
<li>set reference bit 0, leave page in memory</li>
<li>replace next page, subject to same rules</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="counting-algorithms"><a class="header" href="#counting-algorithms">Counting Algorithms</a></h5>
<ul>
<li>Least Frequently Used (LFU) Algorithm</li>
<li>Most Frequently Used (LFU) Algorithm</li>
</ul>
<h4 id="page-buffering-algorithm"><a class="header" href="#page-buffering-algorithm">page buffering algorithm</a></h4>
<ul>
<li>Keep a pool of free frames, always</li>
<li>possibly, keep list of modified pages</li>
<li>Possibly, keep free frame contents intact and note what is in them</li>
</ul>
<h4 id="allocation-of-frames"><a class="header" href="#allocation-of-frames">allocation of frames</a></h4>
<ul>
<li>fixed allocation</li>
<li>priority allocation</li>
</ul>
<h4 id="non-uniform-memory-access"><a class="header" href="#non-uniform-memory-access">Non-Uniform Memory Access</a></h4>
<p>allocating memory “close to” the CPU on which the thread is scheduled</p>
<p><img src="https://imgur.com/4Y4Fqnm.png" alt="" /></p>
<h4 id="thrashing"><a class="header" href="#thrashing">thrashing</a></h4>
<p><img src="https://imgur.com/jBRolG9.png" alt="" /></p>
<h4 id="page-fault-frequency"><a class="header" href="#page-fault-frequency">Page-Fault Frequency</a></h4>
<ul>
<li>A process is busy swapping pages in and out</li>
<li>If a process does not have “enough” pages, the page-fault rate is very high
<ul>
<li>Page fault to get page</li>
<li>Replace existing frame</li>
<li>But quickly need replaced frame back</li>
</ul>
</li>
<li>If actual rate too low, process loses frame</li>
<li>If actual rate too high, process gains frame</li>
</ul>
<p><img src="https://imgur.com/0rls3Hd.png" alt="" /></p>
<h4 id="buddy-system"><a class="header" href="#buddy-system">Buddy System</a></h4>
<ul>
<li>Allocates memory from fixed-size segment consisting of physically-contiguous pages</li>
</ul>
<p><img src="https://imgur.com/0H0IFxN.png" alt="" /></p>
<h4 id="slab-allocator"><a class="header" href="#slab-allocator">Slab Allocator</a></h4>
<ul>
<li>use by solaris and linux</li>
<li>Slab can be in three possible states
<ol>
<li>Full – all used</li>
<li>Empty – all free</li>
<li>Partial – mix of free and used</li>
</ol>
</li>
<li>Upon request, slab allocator
<ol>
<li>Uses free struct in partial slab</li>
<li>If none, takes one from empty slab</li>
<li>If no empty slab, create new empty </li>
</ol>
</li>
</ul>
<p><img src="https://imgur.com/ERv5ZOd.png" alt="" /></p>
<h4 id="priority-allocation"><a class="header" href="#priority-allocation">Priority Allocation</a></h4>
<ul>
<li>If process Pi generates a page fault,
<ul>
<li>select for replacement one of its frames</li>
<li>select for replacement a frame from a process with lower priority number</li>
</ul>
</li>
</ul>
<h1 id="chapter-11-mass-storage-systems"><a class="header" href="#chapter-11-mass-storage-systems">Chapter 11: Mass-Storage Systems</a></h1>
<h2 id="hddhard-disk-drives"><a class="header" href="#hddhard-disk-drives">HDD(hard disk drives)</a></h2>
<ul>
<li>Positioning time (random-access time)
<ul>
<li>seek time
<ul>
<li>calculated based on 1/3 of <code>tracks</code></li>
<li>3ms to 12ms </li>
</ul>
</li>
<li>rotational latency
<ul>
<li>latency = 1 / (RPM / 60) =60/RPM</li>
<li>average latency = <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>latency</li>
</ul>
</li>
</ul>
</li>
<li>Transfer Rate
<ul>
<li>Effective Transfer Rate (real): 1Gb/sec</li>
</ul>
</li>
<li>Access Latency 
<ul>
<li>Access Latency=average seek time + average latency</li>
</ul>
</li>
<li>Average I/O time 
<ul>
<li>Average I/O time = average access time + (amount to transfer / transfer rate) + controller overhead</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/uO6Anva.png" alt="" /></p>
<h2 id="nonvolatile-memory-devices"><a class="header" href="#nonvolatile-memory-devices">Nonvolatile Memory Devices</a></h2>
<ul>
<li>type
<ul>
<li>solid-state disks (SSDs)</li>
<li>usb</li>
</ul>
</li>
<li>drive writes per day (DWPD)
<ul>
<li>A 1TB NAND drive with rating of 5DWPD is expected to have 5TB per day written within warrantee period without failing</li>
</ul>
</li>
</ul>
<h2 id="volatile-memory"><a class="header" href="#volatile-memory">Volatile Memory</a></h2>
<ul>
<li>RAM drives</li>
<li>RAM drives under user control</li>
</ul>
<h2 id="disk-attachment"><a class="header" href="#disk-attachment">Disk Attachment</a></h2>
<ul>
<li>STAT</li>
<li>SAS</li>
<li>USB</li>
<li>FC</li>
<li>NVMe</li>
</ul>
<h2 id="disk-scheduling"><a class="header" href="#disk-scheduling">Disk Scheduling</a></h2>
<ul>
<li>OS maintains queue of requests, per disk or device</li>
<li>Minimize seek time</li>
<li>Linux implements deadline scheduler
<ul>
<li>Maintains separate read and write queues, gives read priority </li>
<li>Because processes more likely to block on read than write</li>
</ul>
</li>
</ul>
<h3 id="fcfs"><a class="header" href="#fcfs">FCFS</a></h3>
<p><img src="https://imgur.com/73QRTSh.png" alt="" /></p>
<h3 id="scan-algorithm"><a class="header" href="#scan-algorithm">SCAN algorithm</a></h3>
<p>The disk arm starts at one end of the disk, and moves toward the other end, servicing requests until it gets to the other end of the disk, where the head movement is reversed and servicing continues</p>
<p><img src="https://imgur.com/cLr4IB5.png" alt="" /></p>
<h3 id="c-scan"><a class="header" href="#c-scan">C-SCAN</a></h3>
<p>SCAN but when it reaches the other end, however, it immediately returns to the beginning of the disk, without servicing any requests on the return trip</p>
<p><img src="https://imgur.com/9HZO3Hk.png" alt="" /></p>
<h2 id="nvm-scheduling"><a class="header" href="#nvm-scheduling">NVM Scheduling</a></h2>
<ul>
<li>NVM best at random I/O, HDD at sequential</li>
<li>write amplification 
<ul>
<li>one write, causing garbage collection and many read/writes</li>
</ul>
</li>
</ul>
<h2 id="error-detection-and-correction"><a class="header" href="#error-detection-and-correction">Error Detection and Correction</a></h2>
<ul>
<li>CRC (checksum)</li>
<li>ECC</li>
</ul>
<h2 id="swap-space-management"><a class="header" href="#swap-space-management">Swap-Space Management</a></h2>
<p>Used for moving entire processes (swapping), or pages (paging), from DRAM to secondary storage when DRAM not large enough for all processes</p>
<h2 id="raid-structure"><a class="header" href="#raid-structure">RAID Structure</a></h2>
<ul>
<li>Mirroring</li>
<li>Striped mirrors (RAID 1+0) or mirrored stripes (RAID 0+1) provides high performance and high reliability</li>
<li>Block interleaved parity (RAID 4, 5, 6) uses much less redundancy</li>
</ul>
<p><img src="https://imgur.com/47aK3pe.png" alt="" /></p>
<h1 id="chapter-13-file-system-interface"><a class="header" href="#chapter-13-file-system-interface">Chapter 13: File-System Interface</a></h1>
<h2 id="file-attributes"><a class="header" href="#file-attributes">file attributes</a></h2>
<p>Name – only information kept in human-readable form</p>
<ul>
<li>Identifier 
<ul>
<li>unique tag (number) identifies file within file system</li>
</ul>
</li>
<li>Type 
<ul>
<li>needed for systems that support different types</li>
</ul>
</li>
<li>Location 
<ul>
<li>pointer to file location on device</li>
</ul>
</li>
<li>Size 
<ul>
<li>current file size</li>
</ul>
</li>
<li>Protection 
<ul>
<li>controls who can do reading, writing, executing</li>
</ul>
</li>
<li>Time, date, and user identification 
<ul>
<li>data for protection, security, and usage monitoring</li>
</ul>
</li>
<li>Information about files are kept in the directory structure, which is maintained on the disk</li>
<li>Many variations, including extended file attributes such as file checksum</li>
</ul>
<h2 id="file-operations"><a class="header" href="#file-operations">file operations</a></h2>
<ul>
<li>create</li>
<li>write</li>
<li>read</li>
<li>seek </li>
<li>delete</li>
<li>truncate</li>
</ul>
<h2 id="file-locking"><a class="header" href="#file-locking">file locking</a></h2>
<ul>
<li>Shared lock</li>
<li>Exclusive lock </li>
<li>Mandatory
<ul>
<li>access is denied depending on locks held and requested</li>
</ul>
</li>
<li>Advisory
<ul>
<li>processes can find status of locks and decide what to do</li>
</ul>
</li>
</ul>
<h2 id="file-structure"><a class="header" href="#file-structure">File Structure</a></h2>
<ul>
<li>simple record structure
<ul>
<li>Lines</li>
<li>Fixed length</li>
<li>Variable length</li>
</ul>
</li>
<li>Complex Structures
<ul>
<li>Formatted document</li>
<li>Relocatable load file</li>
</ul>
</li>
</ul>
<h2 id="types-of-file-systems"><a class="header" href="#types-of-file-systems">types of File Systems</a></h2>
<ul>
<li>tmpfs 
<ul>
<li>memory-based volatile FS for fast, temporary I/O</li>
</ul>
</li>
<li>objfs 
<ul>
<li>interface into kernel memory to get kernel symbols for debugging</li>
</ul>
</li>
<li>ctfs 
<ul>
<li>contract file system for managing daemons</li>
</ul>
</li>
<li>lofs 
<ul>
<li>loopback file system allows one FS to be accessed in place of another</li>
</ul>
</li>
<li>procfs 
<ul>
<li>kernel interface to process structures</li>
</ul>
</li>
<li>ufs, zfs 
<ul>
<li>general purpose file systems</li>
</ul>
</li>
</ul>
<h2 id="directory-structure"><a class="header" href="#directory-structure">Directory structure</a></h2>
<ul>
<li>Naming problem
<ul>
<li>convenient to users</li>
<li>Two users can have the same name for different files</li>
<li>The same file can have several different names</li>
</ul>
</li>
<li>Grouping problem
<ul>
<li>logical grouping of files by properties,</li>
</ul>
</li>
<li>Efficient 
<ul>
<li>locating a file quickly</li>
</ul>
</li>
</ul>
<h3 id="two-level-director"><a class="header" href="#two-level-director">Two-Level Director</a></h3>
<p><img src="https://imgur.com/tJgIcdW.png" alt="" /></p>
<h3 id="tree-structured-directories-acyclic-graph-directories"><a class="header" href="#tree-structured-directories-acyclic-graph-directories">Tree-Structured Directories /Acyclic-Graph Directories</a></h3>
<p><img src="https://imgur.com/HI1YFWX.png" alt="" /></p>
<ul>
<li>guarantee no cycles?
<ul>
<li>Garbage collection</li>
<li>Every time a new link is added use a cycle detection algorithm to determine whether it is OK</li>
</ul>
</li>
</ul>
<h2 id="file-sharing"><a class="header" href="#file-sharing">File Sharing</a></h2>
<ul>
<li>User IDs 
<ul>
<li>identify users, allowing permissions and protections to be per-user</li>
</ul>
</li>
<li>Group IDs 
<ul>
<li>allow users to be in groups, permitting group access rights</li>
</ul>
</li>
</ul>
<p><img src="https://imgur.com/7BJNzLj.png" alt="" />
<img src="https://imgur.com/kXNNJ0n.png" alt="" /></p>

                        <!-- github commet -->
                        <dir id="giscus"></dir>
                        <script>
                            var localAddrs = ["localhost", "127.0.0.1", ""];

                            if (localAddrs.indexOf(document.location.hostname) === -1) {
                                var giscusScript = document.createElement('script');
                                giscusScript.src = "https://giscus.app/client.js";
                                giscusScript.setAttribute('data-repo', 'x06lan/mdbook');
                                giscusScript.setAttribute('data-repo-id', 'R_kgDOJxZ6mQ');
                                giscusScript.setAttribute('data-category-id', 'DIC_kwDOJxZ6mc4CXeJ6');
                                giscusScript.setAttribute('data-mapping', 'pathname');
                                giscusScript.setAttribute('data-strict', '0');
                                giscusScript.setAttribute('data-reactions-enabled', '1');
                                giscusScript.setAttribute('data-emit-metadata', '0');
                                giscusScript.setAttribute('data-input-position', 'bottom');
                                giscusScript.setAttribute('data-theme', 'preferred_color_scheme');
                                giscusScript.setAttribute('data-lang', 'zh-TW');
                                giscusScript.setAttribute('crossorigin', 'anonymous');
                                giscusScript.async = true;
                                let giscusDiv = document.getElementById('giscus');
                                giscusDiv.appendChild(giscusScript);
                            }
                        </script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="../../ace.js"></script>
        <script src="../../editor.js"></script>
        <script src="../../mode-rust.js"></script>
        <script src="../../theme-dawn.js"></script>
        <script src="../../theme-tomorrow_night.js"></script>

        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>
        <script src="../../mermaid.min.js"></script>
        <script src="../../mermaid-init.js"></script>


    </div>
</body>

</html>
